{"version":3,"file":"static/js/1302.fa293916.chunk.js","mappings":"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","sources":["../node_modules/@wormhole-foundation/wormhole-connect/lib/index-Ln6xhy3-.mjs","../node_modules/@wormhole-foundation/wormhole-connect/lib/unsignedTransaction-BDOQhqcZ.mjs"],"sourcesContent":["var A = Object.defineProperty;\nvar B = (d, e, s) => e in d ? A(d, e, { enumerable: !0, configurable: !0, writable: !0, value: s }) : d[e] = s;\nvar o = (d, e, s) => B(d, typeof e != \"symbol\" ? e + \"\" : e, s);\nimport { y as g, l as p, w, x as u } from \"./chunk-KJH4KKG6-CP0k8JeE.mjs\";\nimport { i as S, D as I, b5 as U, aw as D, k as f, bl as l, dl as T, aF as R } from \"./address-CmQhtpW5.mjs\";\nimport { A as E } from \"./platform-BVNlkKfH.mjs\";\nimport { A as $ } from \"./unsignedTransaction-BDOQhqcZ.mjs\";\nconst N = [\n  [\n    \"Mainnet\",\n    {\n      depositForBurn: \"0xa11ceb0b0700000a0701000802080e031614042a04052e30075e870108e5014000000001000201030004000001050701000100060b0001070304010801020805060108010309080900010002010205060c030e05050208000b010108020108020105010b0101090003060c0b01010900030108000004060c08000e0501030e66756e6769626c655f6173736574066f626a656374167072696d6172795f66756e6769626c655f73746f72650f746f6b656e5f6d657373656e6765720d46756e6769626c654173736574064f626a656374084d6574616461746111616464726573735f746f5f6f626a656374087769746864726177106465706f7369745f666f725f6275726e00000000000000000000000000000000000000000000000000000000000000019bce6734f7b63e835108e3bd8c36743d4709fe435f44791918801d0989640a9d0000010f0b0438000c060a000b060b0138010c050b000b050b020b0311020102\",\n      handleReceiveMessage: \"0xa11ceb0b0700000a0601000402040403080c051416072a53087d40000001010002000000030203000101040304000103060c0a020a020003060c060a02060a020108000101136d6573736167655f7472616e736d69747465720f746f6b656e5f6d657373656e67657207526563656970740f726563656976655f6d6573736167651668616e646c655f726563656976655f6d657373616765177e17751820e4b4371873ca8c30279be63bdea63b88ed0f2239c2eea10f17729bce6734f7b63e835108e3bd8c36743d4709fe435f44791918801d0989640a9d000001070b000e010e02110011010102\"\n    }\n  ],\n  [\n    \"Testnet\",\n    {\n      depositForBurn: \"0xa11ceb0b0700000a0701000802080e031614042a04052e30075e870108e5014000000001000201030004000001050701000100060b0001070304010801020805060108010309080900010002010205060c030e05050208000b010108020108020105010b0101090003060c0b01010900030108000004060c08000e0501030e66756e6769626c655f6173736574066f626a656374167072696d6172795f66756e6769626c655f73746f72650f746f6b656e5f6d657373656e6765720d46756e6769626c654173736574064f626a656374084d6574616461746111616464726573735f746f5f6f626a656374087769746864726177106465706f7369745f666f725f6275726e00000000000000000000000000000000000000000000000000000000000000015f9b937419dda90aa06c1836b7847f65bbbe3f1217567758dc2488be31a477b90000010f0b0438000c060a000b060b0138010c050b000b050b020b0311020102\",\n      handleReceiveMessage: \"0xa11ceb0b0700000a0601000402040403080c051416072a53087d40000001010002000000030203000101040304000103060c0a020a020003060c060a02060a020108000101136d6573736167655f7472616e736d69747465720f746f6b656e5f6d657373656e67657207526563656970740f726563656976655f6d6573736167651668616e646c655f726563656976655f6d657373616765081e86cebf457a0c6004f35bd648a2794698f52e0dde09a48619dcd3d4cc23d95f9b937419dda90aa06c1836b7847f65bbbe3f1217567758dc2488be31a477b9000001070b000e010e02110011010102\"\n    }\n  ]\n], k = S(N, [0, 1]);\nclass b {\n  constructor(e, s, n, t) {\n    o(this, \"network\");\n    o(this, \"chain\");\n    o(this, \"provider\");\n    o(this, \"contracts\");\n    o(this, \"usdcId\");\n    o(this, \"tokenMessengerId\");\n    o(this, \"messageTransmitterId\");\n    o(this, \"moveScripts\");\n    var r, i, c;\n    if (this.network = e, this.chain = s, this.provider = n, this.contracts = t, e === \"Devnet\")\n      throw new Error(\"CircleBridge not supported on Devnet\");\n    const a = I.get(this.network, this.chain);\n    if (!a)\n      throw new Error(`No USDC contract configured for network=${this.network} chain=${this.chain}`);\n    if (!((r = t.cctp) != null && r.tokenMessenger))\n      throw new Error(`Circle Token Messenger contract for domain ${s} not found`);\n    if (!((i = t.cctp) != null && i.messageTransmitter))\n      throw new Error(`Circle Message Transmitter contract for domain ${s} not found`);\n    if (!k.has(e))\n      throw new Error(\"No Aptos CCTP move scripts found\");\n    this.usdcId = a, this.tokenMessengerId = (c = t.cctp) == null ? void 0 : c.tokenMessenger, this.messageTransmitterId = t.cctp.messageTransmitter, this.moveScripts = k.get(e);\n  }\n  async *transfer(e, s, n) {\n    const t = new g(U.get(this.network, s.chain)), a = p.from(this.usdcId), r = p.from(s.address.toUniversalAddress().toUint8Array()), i = [new w(n), t, r, a], c = {\n      bytecode: this.moveScripts.depositForBurn,\n      functionArguments: i\n    };\n    yield this.createUnsignedTx(c, \"Aptos.CircleBridge.Transfer\");\n  }\n  async isTransferCompleted(e) {\n    const s = new g(e.sourceDomain).bcsToBytes(), n = new w(e.nonce).bcsToBytes(), t = D(new Uint8Array([...s, 45, ...n])), a = f.encode(t);\n    return (await this.provider.view({\n      payload: {\n        function: `${this.messageTransmitterId}::message_transmitter::is_nonce_used`,\n        functionArguments: [a]\n      }\n    }))[0];\n  }\n  async *redeem(e, s, n) {\n    const t = [\n      u.U8(l.serialize(s)),\n      u.U8(f.decode(n))\n    ], a = {\n      bytecode: this.moveScripts.handleReceiveMessage,\n      functionArguments: t\n    };\n    yield this.createUnsignedTx(a, \"Aptos.CircleBridge.Redeem\");\n  }\n  async parseTransactionDetails(e) {\n    var m;\n    const s = await this.provider.getTransactionByHash({ transactionHash: e }), n = this.messageTransmitterId.replace(/^0x0+/, \"0x\"), t = (m = s.events) == null ? void 0 : m.find((M) => M.type === `${n}::message_transmitter::MessageSent`);\n    if (!t)\n      throw new Error(\"No MessageSent event found\");\n    const a = f.decode(t.data.message), [r, i] = l.deserialize(a), { payload: c } = r, v = c.messageSender, C = c.mintRecipient, h = T(this.network, r.sourceDomain), y = T(this.network, r.destinationDomain), x = { chain: h, address: c.burnToken };\n    return {\n      from: { chain: h, address: v },\n      to: { chain: y, address: C },\n      token: x,\n      amount: c.amount,\n      message: r,\n      id: { hash: i }\n    };\n  }\n  static async fromRpc(e, s) {\n    const [n, t] = await E.chainFromRpc(e), a = s[t];\n    if (a.network !== n)\n      throw new Error(`Network mismatch: ${a.network} != ${n}`);\n    return new b(n, t, e, a.contracts);\n  }\n  createUnsignedTx(e, s, n = !1) {\n    return new $(e, this.network, this.chain, s, n);\n  }\n}\nR(\"Aptos\", \"CircleBridge\", b);\nexport {\n  b as AptosCircleBridge\n};\n","var o = Object.defineProperty;\nvar c = (a, t, i) => t in a ? o(a, t, { enumerable: !0, configurable: !0, writable: !0, value: i }) : a[t] = i;\nvar s = (a, t, i) => c(a, typeof t != \"symbol\" ? t + \"\" : t, i);\nclass h {\n  constructor(t, i, n, r, e = !1) {\n    s(this, \"transaction\");\n    s(this, \"network\");\n    s(this, \"chain\");\n    s(this, \"description\");\n    s(this, \"parallelizable\");\n    this.transaction = t, this.network = i, this.chain = n, this.description = r, this.parallelizable = e;\n  }\n}\nexport {\n  h as A\n};\n"],"names":["A","Object","defineProperty","o","d","e","s","B","enumerable","configurable","writable","value","k","S","depositForBurn","handleReceiveMessage","b","constructor","n","t","r","i","c","this","network","chain","provider","contracts","Error","a","I","get","concat","cctp","tokenMessenger","messageTransmitter","has","usdcId","tokenMessengerId","messageTransmitterId","moveScripts","transfer","_this","_wrapAsyncGenerator","g","U","p","from","address","toUniversalAddress","toUint8Array","w","bytecode","functionArguments","createUnsignedTx","isTransferCompleted","sourceDomain","bcsToBytes","nonce","D","Uint8Array","f","encode","view","payload","function","redeem","_this2","u","U8","l","serialize","decode","parseTransactionDetails","m","getTransactionByHash","transactionHash","replace","events","find","M","type","data","message","deserialize","v","messageSender","C","mintRecipient","h","T","to","destinationDomain","token","burnToken","amount","id","hash","fromRpc","E","chainFromRpc","arguments","length","undefined","$","R","transaction","description","parallelizable"],"sourceRoot":""}